'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var parseosInformation=function(a){var b=a.headers['user-agent'],c={};return /mobile/i.test(b)&&(c.Mobile=!0),/like Mac OS X/.test(b)&&(c.iOS=/CPU( iPhone)? OS ([0-9\._]+) like Mac OS X/.exec(b)[2].replace(/_/g,'.'),c.iPhone=/iPhone/.test(b),c.iPad=/iPad/.test(b)),/Android/.test(b)&&(c.Android=/Android ([0-9\.]+)[\);]/.exec(b)[1]),/webOS\//.test(b)&&(c.webOS=/webOS\/([0-9\.]+)[\);]/.exec(b)[1]),/(Intel|PPC) Mac OS X/.test(b)&&(b.Mac=/(Intel|PPC) Mac OS X ?([0-9\._]*)[\)\;]/.exec(b)[2].replace(/_/g,'.')||!0),/Windows NT/.test(b)&&(c.Windows=/Windows NT ([0-9\._]+)[\);]/.exec(b)[1]),c},parseMetadataHeader=function(a){var b='',c=a.headers,d=a.connection,e=a.ip;if(a.headers['x-forwarded-for']){var f=c['x-forwarded-for'].split(','),g=f.first;b=g}else b=a.connection&&a.connection.remoteAddress?d.remoteAddress:e;return{address:b,clientLanguage:c['accept-language']?c['accept-language'].split(',')[0]:'NO INFO',clientOsInfo:parseosInformation(a)}};exports.default=parseMetadataHeader;
