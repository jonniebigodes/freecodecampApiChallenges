'use strict';Object.defineProperty(exports,'__esModule',{value:!0});function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var randomizeNumber=function(){return Math.floor(Math.random()*999999+1)},validateUrl=function(a){var b=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i;return b.test(a)},searchId=function(a,b){var c=b.find(function(b){return b.urlid===a});return!!c},createShortUrl=function(a){var b=validateUrl(a.url),c=[].concat(_toConsumableArray(a.urls));if(b){for(var d=randomizeNumber();searchId(d,c);)d=randomizeNumber();return{shortId:randomId,shortened_url:'production'===process.env.NODE.env?'https://freecodecampapichallenges.herokuapp.com/api/short/'+randomId:'http://localhost:5000/api/short/'+randomId,original_url:a.url}}return{shortId:-1,original_url:a.url,shortened_url:'NOK'}};exports.default=createShortUrl;
